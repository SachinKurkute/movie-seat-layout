/*!
* Seat Layout Library v0.01
* Copyright (c) 2017 Sachin Kurkute
* MIT License : https://github.com/SachinKurkute/movie-seat-layout/blob/master/LICENSE
*/
!function(e){function t(t){var a,n,s=e.extend({},t.options),o=function(e){a=e.intMaxSeatId,n=e.intMinSeatId;for(var t="<div class='seat-selection' style='width:"+25.5*(a+1)+"px'>",o=0;o<e.objArea.length;o++)t+=r(e.objArea[o]);var c=s.showActionButtons?"<div class='seat-proccess-panel'> <button  type='button' class='layout-action-btn layout-btn-cancel  "+s.classes.cancelBtn+"'> Cancel </button> <button type='button' class='layout-action-btn layout-btn-done "+s.classes.doneBtn+"'> Done </button> </div>":"";return t+="<div class='movie-screen "+s.classes.screen+"'>-- Screen --</div>"+c+"</div>"},r=function(e){var t="<div class='seat-area "+s.classes.area+"'>";t+="<div class='seat-area-desc'>"+e.AreaDesc+"</div>";for(var a=0;a<e.objRow.length;a++)t+=c(e.objRow[a],e);return t+="</div>"},c=function(e,t){for(var o="<ul class='seat-area-row "+s.classes.row+"'> <li class='seat-row-seat row-indicator'>"+e.PhyRowId+"</li>",r=0,c=0;c<e.objSeat.length;c++){if(0==c){var l=e.objSeat[c].GridSeatNum-n-(e.objSeat[c].GridSeatNum-e.objSeat[c].seatNumber);if(l>0)for(var i=0;l>i;i++)o+=getSeatLayoutFunc({},!1,e,t)}var u=parseInt(e.objSeat[c].GridSeatNum-(e.objSeat[c].seatNumber+r));if(u>0){r+=u;for(var d=0;u>d;d++)o+=getSeatLayoutFunc({},!1,e,t)}o+=getSeatLayoutFunc(e.objSeat[c],!0,e,t)}var f=a-(e.objSeat.length+l+r);if(f>0)for(var S=0;f>S;S++)o+=getSeatLayoutFunc({},!1,e,t);return o+="</ul>"};return getSeatLayoutFunc=function(e,a,n,o){if(e.GridRowId=n.GridRowId,e.PhyRowId=n.PhyRowId,e.AreaNum=o.AreaNum,e.AreaCode=o.AreaCode,e.AreaDesc=o.AreaDesc,e=t.callSeatRender(e)){var r=JSON.stringify(e),c=s.classes.seat;return a?(e&&"0"==e.SeatStatus&&(c+=" can-select"),"<li data-seatdefination='"+r+"' class='seat-row-seat seat-yes "+c+" '><span></span></li>"):"<li class='seat-row-seat "+c+"'></li>"}},{getAreaLayout:r,getRowLayout:c,getSeatLayout:getSeatLayoutFunc,getMainLayout:o}}e.fn.seatLayout=function(a){function n(e){return e.data("seatdefination")}var s=e.extend(!0,{},{type:"movie",showActionButtons:!0,classes:{doneBtn:"",cancelBtn:"",seat:"",row:"",area:"",screen:""},numberOfSeat:1},a),o=[],r=s.numberOfSeat,c=0,l=this,i="",u=new t({callSeatRender:function(e){return s.callOnSeatRender?s.callOnSeatRender(e):e},options:s});return i=u.getMainLayout(s.data.seatLayout.colAreas),l.html(i),l.find("li").click(function(t){if(e(this).hasClass("can-select")){var a=(n(e(this)),e(this).nextAll().andSelf());o.length==r&&(c=0,o=[],l.find("li.current-selected").removeClass("current-selected"));for(var i=c,u=0;r-c>u&&(a[u]&&e(a[u]).hasClass("can-select")&&!e(a[u]).hasClass("current-selected"));u++)o.push(n(e(a[u]))),e(a[u]).addClass("current-selected"),i++;c=i,l.find(".layout-btn-done").prop("disabled",!(r==o.length));var d=e.extend({},n(e(this)));d.selected=o,s.callOnSeatSelect(t,d,this)}}),l.find(".layout-btn-done").prop("disabled",!0),l.find(".layout-btn-done").click(function(e){s.selectionDone&&s.selectionDone({selected:o})}),l.find(".layout-btn-cancel").click(function(t){returnFlag=!0,s.cancel&&(returnFlag=0==s.cancel(t)?!1:!0),returnFlag&&(e(l).remove(),u=null,s=null)}),this}}(jQuery);