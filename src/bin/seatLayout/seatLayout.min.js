/*!
* Seat Layout Library v0.01
* Copyright (c) 2017 Sachin Kurkute
* MIT License : https://github.com/SachinKurkute/movie-seat-layout/blob/master/LICENSE
*/
!function(){function e(e){var t,a,n=function(e){t=e.intMaxSeatId,a=e.intMinSeatId;for(var n="<div class='seat-selection' style='width:"+25.5*(t+1)+"px'>",o=0;o<e.objArea.length;o++)n+=r(e.objArea[o]);return n+="<div class='movie-screen'>-- Screen --</div><div class='seat-proccess-panel'> <button class='layout-action-btn layout-btn-cancel'> Cancel </button> <button class='layout-action-btn layout-btn-done'> Done </button> </div></div>"},r=function(e){var t="<div class='seat-area'>";t+="<div class='seat-area-desc'>"+e.AreaDesc+"</div>";for(var a=0;a<e.objRow.length;a++)t+=o(e.objRow[a],e);return t+="</div>"},o=function(e,n){for(var r="<ul class='seat-area-row'> <li class='seat-row-seat row-indicator'>"+e.PhyRowId+"</li>",o=0,s=0;s<e.objSeat.length;s++){if(0==s){var l=e.objSeat[s].GridSeatNum-a-(e.objSeat[s].GridSeatNum-e.objSeat[s].seatNumber);if(l>0)for(var c=0;l>c;c++)r+=getSeatLayoutFunc({},!1,e,n)}var i=parseInt(e.objSeat[s].GridSeatNum-(e.objSeat[s].seatNumber+o));if(i>0){o+=i;for(var u=0;i>u;u++)r+=getSeatLayoutFunc({},!1,e,n)}r+=getSeatLayoutFunc(e.objSeat[s],!0,e,n)}var d=t-(e.objSeat.length+l+o);if(d>0)for(var f=0;d>f;f++)r+=getSeatLayoutFunc({},!1,e,n);return r+="</ul>"};return getSeatLayoutFunc=function(t,a,n,r){if(t.GridRowId=n.GridRowId,t.PhyRowId=n.PhyRowId,t.AreaNum=r.AreaNum,t.AreaCode=r.AreaCode,t.AreaDesc=r.AreaDesc,t=e.callSeatRender(t)){var o=JSON.stringify(t);if(a){var s="";return t&&"0"==t.SeatStatus&&(s+=" can-select"),"<li data-seatdefination='"+o+"' class='seat-row-seat seat-yes "+s+" '><span></span></li>"}return"<li class='seat-row-seat'></li>"}},{getAreaLayout:r,getRowLayout:o,getSeatLayout:getSeatLayoutFunc,getMainLayout:n}}$.fn.seatLayout=function(t){function a(e){return e.data("seatdefination")}var n=[],r=t.numberOfSeat,o=0,s=this,l="",c=new e({callSeatRender:function(e){return t.callOnSeatRender?t.callOnSeatRender(e):e}});return l=c.getMainLayout(t.data.seatLayout.colAreas),s.html(l),s.find("li").click(function(e){if($(this).hasClass("can-select")){var l=(a($(this)),$(this).nextAll().andSelf());n.length==r&&(o=0,n=[],s.find("li.current-selected").removeClass("current-selected"));for(var c=o,i=0;r-o>i&&(l[i]&&$(l[i]).hasClass("can-select")&&!$(l[i]).hasClass("current-selected"));i++)n.push(a($(l[i]))),$(l[i]).addClass("current-selected"),c++;o=c,s.find(".layout-btn-done").prop("disabled",!(r==n.length));var u=a($(this));u.selected=n,t.callOnSeatSelect(e,u,this)}}),s.find(".layout-btn-done").prop("disabled",!0),s.find(".layout-btn-done").click(function(e){t.selectionDone&&t.selectionDone({selected:n})}),s.find(".layout-btn-cancel").click(function(e){returnFlag=!0,t.cancel&&(returnFlag=0==t.cancel(e)?!1:!0),returnFlag&&($(s).remove(),c=null,t=null)}),this}}();